<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Relay - A JavaScript framework for building data-driven React applications</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Relay - A JavaScript framework for building data-driven React applications"><meta property="og:type" content="website"><meta property="og:url" content="http://facebook.github.io/relay/"><meta property="og:description" content="A JavaScript framework for building data-driven React applications"><link rel="shortcut icon" href="/relay/img/favicon.png"><link rel="stylesheet" href="/relay/css/relay.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="/relay/"><img class="nav-logo" src="/relay/img/logo.svg" width="50" height="50">Relay</a><ul class="nav-site"><li><a href="/relay/prototyping/playground.html" class="">Try it out</a></li><li><a href="/relay/docs/getting-started.html" class="">Docs</a></li><li><a href="/relay/support.html" class="">Support</a></li><li><a href="https://github.com/facebook/relay" class="">GitHub</a></li></ul></div></div><div class="hero"><div class="wrap"><img class="hero-logo" src="/relay/img/logo.svg" width="300" height="300"><h1 class="text"><strong>Relay</strong></h1><h2 class="minitext">A JavaScript framework for building data-driven React applications</h2><div class="buttons-unit"><a class="button" href="prototyping/playground.html">Try It Out</a><a class="button" href="docs/getting-started.html">Get Started</a></div></div></div><section class="content wrap"><section class="marketing-row"><div class="marketing-col"><h3>Declarative</h3><p>Declare the data your components need with GraphQL, Relay determines how and when to fetch your data.</p></div><div class="marketing-col"><h3>Colocation</h3><p>GraphQL is written next to the views that rely on them. Relay aggregates queries into efficient network requests.</p></div><div class="marketing-col"><h3>Mutations</h3><p>Write GraphQL mutations and Relay offers automatic data consistency, optimistic updates, and error handling.</p></div></section><section class="relay-modern"><div class="starburst">New</div><h2>Relay Modern</h2><p>Relay Modern is a new version of Relay designed from the ground up to be easier to use, more extensible and, most of all, able to improve performance on mobile devices. Relay Modern accomplishes this with static queries and ahead-of-time code generation.</p><p>Incrementally convert existing Relay apps, or start a new one with Relay Modern.</p><a class="button" href="docs/relay-modern.html">Try Relay Modern</a></section><section class="home-section"><section id="examples"><div class="example"><h2>A simple list</h2><p>Relay lets each view declare its own data requirements in the form of a <strong>GraphQL query fragment</strong>. Here, each tea in this list of teas declares that it needs a <code>name</code> and a <code>steepingTime</code> to be able to render. Just like we compose React components to build an app, we <strong>compose query fragments</strong> together to build a single query at the root of the app.</p><iframe height="426" src="prototyping/playground.html#noCache&amp;source=class%20Tea%20extends%20React.Component%20%7B%0A%20%20render()%20%7B%0A%20%20%20%20var%20%7Bname%2C%20steepingTime%7D%20%3D%20this.props.tea%3B%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%3Cli%20key%3D%7Bname%7D%3E%0A%20%20%20%20%20%20%20%20%7Bname%7D%20(%3Cem%3E%7BsteepingTime%7D%20min%3C%2Fem%3E)%0A%20%20%20%20%20%20%3C%2Fli%3E%0A%20%20%20%20)%3B%0A%20%20%7D%0A%7D%0ATea%20%3D%20Relay.createContainer(Tea%2C%20%7B%0A%20%20fragments%3A%20%7B%0A%20%20%20%20tea%3A%20()%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20fragment%20on%20Tea%20%7B%0A%20%20%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20steepingTime%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%2C%0A%7D)%3B%0A%0Aclass%20TeaStore%20extends%20React.Component%20%7B%0A%20%20render()%20%7B%0A%20%20%20%20return%20%3Cul%3E%0A%20%20%20%20%20%20%7Bthis.props.store.teas.map(%0A%20%20%20%20%20%20%20%20tea%20%3D%3E%20%3CTea%20tea%3D%7Btea%7D%20%2F%3E%0A%20%20%20%20%20%20)%7D%0A%20%20%20%20%3C%2Ful%3E%3B%0A%20%20%7D%0A%7D%0ATeaStore%20%3D%20Relay.createContainer(TeaStore%2C%20%7B%0A%20%20fragments%3A%20%7B%0A%20%20%20%20store%3A%20()%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20fragment%20on%20Store%20%7B%0A%20%20%20%20%20%20%20%20teas%20%7B%20%24%7BTea.getFragment(&#x27;tea&#x27;)%7D%20%7D%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%2C%0A%7D)%3B%0A%0Aclass%20TeaHomeRoute%20extends%20Relay.Route%20%7B%0A%20%20static%20routeName%20%3D%20&#x27;Home&#x27;%3B%0A%20%20static%20queries%20%3D%20%7B%0A%20%20%20%20store%3A%20(Component)%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20query%20TeaStoreQuery%20%7B%0A%20%20%20%20%20%20%20%20store%20%7B%20%24%7BComponent.getFragment(&#x27;store&#x27;)%7D%20%7D%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%3B%0A%7D%0A%0AReactDOM.render(%0A%20%20%3CRelay.RootContainer%0A%20%20%20%20Component%3D%7BTeaStore%7D%0A%20%20%20%20route%3D%7Bnew%20TeaHomeRoute()%7D%0A%20%20%2F%3E%2C%0A%20%20mountNode%0A)%3B&amp;schema=import%20%7B%0A%20%20GraphQLInt%2C%0A%20%20GraphQLList%2C%0A%20%20GraphQLObjectType%2C%0A%20%20GraphQLSchema%2C%0A%20%20GraphQLString%2C%0A%7D%20from%20&#x27;graphql&#x27;%3B%0A%0Aconst%20STORE%20%3D%20%7B%0A%20%20teas%3A%20%5B%0A%20%20%20%20%7Bname%3A%20&#x27;Earl%20Grey%20Blue%20Star&#x27;%2C%20steepingTime%3A%205%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Milk%20Oolong&#x27;%2C%20steepingTime%3A%203%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Gunpowder%20Golden%20Temple&#x27;%2C%20steepingTime%3A%203%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Assam%20Hatimara&#x27;%2C%20steepingTime%3A%205%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Bancha&#x27;%2C%20steepingTime%3A%202%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Ceylon%20New%20Vithanakande&#x27;%2C%20steepingTime%3A%205%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Golden%20Tip%20Yunnan&#x27;%2C%20steepingTime%3A%205%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Jasmine%20Phoenix%20Pearls&#x27;%2C%20steepingTime%3A%203%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Kenya%20Milima&#x27;%2C%20steepingTime%3A%205%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Pu%20Erh%20First%20Grade&#x27;%2C%20steepingTime%3A%204%7D%2C%0A%20%20%20%20%7Bname%3A%20&#x27;Sencha%20Makoto&#x27;%2C%20steepingTime%3A%202%7D%2C%0A%20%20%5D%2C%0A%7D%3B%0A%0Avar%20TeaType%20%3D%20new%20GraphQLObjectType(%7B%0A%20%20name%3A%20&#x27;Tea&#x27;%2C%0A%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20name%3A%20%7Btype%3A%20GraphQLString%7D%2C%0A%20%20%20%20steepingTime%3A%20%7Btype%3A%20GraphQLInt%7D%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A%0Avar%20StoreType%20%3D%20new%20GraphQLObjectType(%7B%0A%20%20name%3A%20&#x27;Store&#x27;%2C%0A%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20teas%3A%20%7Btype%3A%20new%20GraphQLList(TeaType)%7D%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A%0Aexport%20default%20new%20GraphQLSchema(%7B%0A%20%20query%3A%20new%20GraphQLObjectType(%7B%0A%20%20%20%20name%3A%20&#x27;Query&#x27;%2C%0A%20%20%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20%20%20store%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20StoreType%2C%0A%20%20%20%20%20%20%20%20resolve%3A%20()%20%3D%3E%20STORE%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A" width="100%"></iframe></div><div class="example"><h2>A simple parameterization</h2><p>Relay query fragments can be parameterized using <strong>variables</strong> in GraphQL <strong>calls</strong>. This enables mechanics like pagination, filtering, sorting, and more.</p><iframe height="426" src="prototyping/playground.html#noCache&amp;source=class%20Score%20extends%20React.Component%20%7B%0A%20%20render()%20%7B%0A%20%20%20%20var%20%7Binitials%2C%20score%7D%20%3D%20this.props.score%3B%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%3Cli%20key%3D%7Binitials%7D%3E%0A%20%20%20%20%20%20%20%20%3Cstrong%3E%7Binitials%7D%3C%2Fstrong%3E%20%7Bscore%7D%0A%20%20%20%20%20%20%3C%2Fli%3E%0A%20%20%20%20)%3B%0A%20%20%7D%0A%7D%0AScore%20%3D%20Relay.createContainer(Score%2C%20%7B%0A%20%20fragments%3A%20%7B%0A%20%20%20%20score%3A%20()%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20fragment%20on%20Score%20%7B%0A%20%20%20%20%20%20%20%20initials%2C%0A%20%20%20%20%20%20%20%20score%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%2C%0A%7D)%3B%0A%0Aclass%20Game%20extends%20React.Component%20%7B%0A%20%20_handleCountChange%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20this.props.relay.setVariables(%7B%0A%20%20%20%20%20%20numToShow%3A%20e.target.value%0A%20%20%20%20%20%20%20%20%3F%20parseInt(e.target.value%2C%2010)%0A%20%20%20%20%20%20%20%20%3A%200%2C%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20_handleSortChange%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20this.props.relay.setVariables(%7B%0A%20%20%20%20%20%20sortDirection%3A%20e.target.value%2C%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20render()%20%7B%0A%20%20%20%20var%20%7Bscores%7D%20%3D%20this.props.game%3B%0A%20%20%20%20var%20%7B%0A%20%20%20%20%20%20numToShow%2C%0A%20%20%20%20%20%20sortDirection%2C%0A%20%20%20%20%7D%20%3D%20this.props.relay.variables%3B%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Ch1%3EHigh%20Scores%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%3Cselect%0A%20%20%20%20%20%20%20%20%20%20defaultValue%3D%7BsortDirection%7D%0A%20%20%20%20%20%20%20%20%20%20onChange%3D%7Bthis._handleSortChange%7D%3E%0A%20%20%20%20%20%20%20%20%20%20%3Coption%20value%3D%22asc%22%3EBottom%3C%2Foption%3E%0A%20%20%20%20%20%20%20%20%20%20%3Coption%20value%3D%22desc%22%3ETop%3C%2Foption%3E%0A%20%20%20%20%20%20%20%20%3C%2Fselect%3E%7B&#x27;%20&#x27;%7D%0A%20%20%20%20%20%20%20%20%3Cinput%0A%20%20%20%20%20%20%20%20%20%20onChange%3D%7Bthis._handleCountChange%7D%0A%20%20%20%20%20%20%20%20%20%20min%3D%220%22%0A%20%20%20%20%20%20%20%20%20%20style%3D%7B%7Bwidth%3A%2044%7D%7D%0A%20%20%20%20%20%20%20%20%20%20type%3D%22number%22%0A%20%20%20%20%20%20%20%20%20%20value%3D%7BnumToShow%7D%0A%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%7Bscores.map(%0A%20%20%20%20%20%20%20%20%20%20%20%20score%20%3D%3E%20%3CScore%20score%3D%7Bscore%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%3C%2Ful%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20)%3B%0A%20%20%7D%0A%7D%0AGame%20%3D%20Relay.createContainer(Game%2C%20%7B%0A%20%20initialVariables%3A%20%7B%0A%20%20%20%20numToShow%3A%2010%2C%0A%20%20%20%20sortDirection%3A%20&#x27;desc&#x27;%2C%0A%20%20%7D%2C%0A%20%20fragments%3A%20%7B%0A%20%20%20%20game%3A%20()%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20fragment%20on%20Game%20%7B%0A%20%20%20%20%20%20%20%20scores(%0A%20%20%20%20%20%20%20%20%20%20numToShow%3A%20%24numToShow%2C%0A%20%20%20%20%20%20%20%20%20%20sortDirection%3A%20%24sortDirection%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%24%7BScore.getFragment(&#x27;score&#x27;)%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%2C%0A%7D)%3B%0A%0Aclass%20GameHomeRoute%20extends%20Relay.Route%20%7B%0A%20%20static%20routeName%20%3D%20&#x27;Home&#x27;%3B%0A%20%20static%20queries%20%3D%20%7B%0A%20%20%20%20game%3A%20(Component)%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20query%20GameQuery%20%7B%0A%20%20%20%20%20%20%20%20game%20%7B%20%24%7BComponent.getFragment(&#x27;game&#x27;)%7D%20%7D%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%3B%0A%7D%0A%0AReactDOM.render(%0A%20%20%3CRelay.RootContainer%0A%20%20%20%20Component%3D%7BGame%7D%0A%20%20%20%20route%3D%7Bnew%20GameHomeRoute()%7D%0A%20%20%2F%3E%2C%0A%20%20mountNode%0A)%3B&amp;schema=import%20%7B%0A%20%20GraphQLInt%2C%0A%20%20GraphQLList%2C%0A%20%20GraphQLObjectType%2C%0A%20%20GraphQLSchema%2C%0A%20%20GraphQLString%2C%0A%7D%20from%20&#x27;graphql&#x27;%3B%0A%0Aconst%20GAME%20%3D%20%7B%0A%20%20scores%3A%20%5B%0A%20%20%20%20%7Binitials%3A%20&#x27;SDL&#x27;%2C%20score%3A%20134812%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;_TY&#x27;%2C%20score%3A%20897243%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;AAA&#x27;%2C%20score%3A%20348234%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;_LK&#x27;%2C%20score%3A%20903244%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;_JK&#x27;%2C%20score%3A%20890324%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;GLH&#x27;%2C%20score%3A%20248721%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;_JS&#x27;%2C%20score%3A%20257893%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;Y~Z&#x27;%2C%20score%3A%20752323%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;J%2FD&#x27;%2C%20score%3A%20982354%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;L!B&#x27;%2C%20score%3A%20252432%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;N*S&#x27;%2C%20score%3A%20982523%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;*DS&#x27;%2C%20score%3A%20278347%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;%2BAZ&#x27;%2C%20score%3A%20178954%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;FC%3B&#x27;%2C%20score%3A%20897252%7D%2C%0A%20%20%20%20%7Binitials%3A%20&#x27;%23BK&#x27;%2C%20score%3A%20547840%7D%2C%0A%20%20%5D%2C%0A%7D%3B%0A%0Avar%20ScoreType%20%3D%20new%20GraphQLObjectType(%7B%0A%20%20name%3A%20&#x27;Score&#x27;%2C%0A%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20initials%3A%20%7Btype%3A%20GraphQLString%7D%2C%0A%20%20%20%20score%3A%20%7Btype%3A%20GraphQLInt%7D%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A%0Avar%20GameType%20%3D%20new%20GraphQLObjectType(%7B%0A%20%20name%3A%20&#x27;Game&#x27;%2C%0A%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20scores%3A%20%7B%0A%20%20%20%20%20%20args%3A%20%7B%0A%20%20%20%20%20%20%20%20numToShow%3A%20%7Btype%3A%20GraphQLInt%7D%2C%0A%20%20%20%20%20%20%20%20sortDirection%3A%20%7Btype%3A%20GraphQLString%7D%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20type%3A%20new%20GraphQLList(ScoreType)%2C%0A%20%20%20%20%20%20resolve%3A%20(game%2C%20%7BnumToShow%2C%20sortDirection%7D)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(numToShow%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20numToShow%20%3D%20game.scores.length%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20sortMult%20%3D%20sortDirection%20%3D%3D%3D%20&#x27;asc&#x27;%20%3F%201%20%3A%20-1%3B%0A%20%20%20%20%20%20%20%20return%20game.scores%0A%20%20%20%20%20%20%20%20%20%20.sort((a%2C%20b)%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20sortMult%20*%20(a.score%20-%20b.score)%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20.slice(0%2C%20numToShow)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A%0Aexport%20default%20new%20GraphQLSchema(%7B%0A%20%20query%3A%20new%20GraphQLObjectType(%7B%0A%20%20%20%20name%3A%20&#x27;Query&#x27;%2C%0A%20%20%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20%20%20game%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20GameType%2C%0A%20%20%20%20%20%20%20%20resolve%3A%20()%20%3D%3E%20GAME%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A" width="100%"></iframe></div><div class="example"><h2>A simple mutation</h2><p>Use Relay to change the world through the use of GraphQL mutations. Given a set of <strong>query fragments</strong>, a <strong>mutation</strong>, a query that represents <strong>all parts of the world that might change</strong> as a result of this mutation (the ‘fat query’), and a <strong>set of behaviors to exhibit</strong> when the server responds (the ‘query configs’), Relay will ensure that all of the data necessary to perform the mutation has been fetched, and that your client-side data stays in sync with the server after the mutation.</p><iframe height="426" src="prototyping/playground.html#noCache&amp;source=class%20CreateCommentMutation%20extends%20Relay.Mutation%20%7B%0A%20%20static%20fragments%20%3D%20%7B%0A%20%20%20%20story%3A%20()%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20fragment%20on%20Story%20%7B%20id%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%3B%0A%20%20getMutation()%20%7B%0A%20%20%20%20return%20Relay.QL%60%0A%20%20%20%20%20%20mutation%7B%20createComment%20%7D%0A%20%20%20%20%60%3B%0A%20%20%7D%0A%20%20getFatQuery()%20%7B%0A%20%20%20%20return%20Relay.QL%60%0A%20%20%20%20%20%20fragment%20on%20CreateCommentPayload%20%7B%20%0A%20%20%20%20%20%20%20%20story%20%7B%20comments%20%7D%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%3B%0A%20%20%7D%0A%20%20getConfigs()%20%7B%0A%20%20%20%20return%20%5B%7B%0A%20%20%20%20%20%20type%3A%20&#x27;FIELDS_CHANGE&#x27;%2C%0A%20%20%20%20%20%20fieldIDs%3A%20%7B%20story%3A%20this.props.story.id%20%7D%2C%0A%20%20%20%20%7D%5D%3B%0A%20%20%7D%0A%20%20getVariables()%20%7B%0A%20%20%20%20return%20%7B%20text%3A%20this.props.text%20%7D%3B%0A%20%20%7D%0A%7D%0A%0Aclass%20Comment%20extends%20React.Component%20%7B%0A%20%20render()%20%7B%0A%20%20%20%20var%20%7Bid%2C%20text%7D%20%3D%20this.props.comment%3B%0A%20%20%20%20return%20%3Cli%20key%3D%7Bid%7D%3E%7Btext%7D%3C%2Fli%3E%3B%0A%20%20%7D%0A%7D%0AComment%20%3D%20Relay.createContainer(Comment%2C%20%7B%0A%20%20fragments%3A%20%7B%0A%20%20%20%20comment%3A%20()%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20fragment%20on%20Comment%20%7B%0A%20%20%20%20%20%20%20%20id%2C%0A%20%20%20%20%20%20%20%20text%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%2C%0A%7D)%3B%0A%0Aclass%20Story%20extends%20React.Component%20%7B%0A%20%20_handleSubmit%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20Relay.Store.update(%0A%20%20%20%20%20%20new%20CreateCommentMutation(%7B%0A%20%20%20%20%20%20%20%20story%3A%20this.props.story%2C%0A%20%20%20%20%20%20%20%20text%3A%20this.refs.newCommentInput.value%2C%0A%20%20%20%20%20%20%7D)%0A%20%20%20%20)%3B%0A%20%20%20%20this.refs.newCommentInput.value%20%3D%20&#x27;&#x27;%3B%0A%20%20%7D%0A%20%20render()%20%7B%0A%20%20%20%20var%20%7Bcomments%7D%20%3D%20this.props.story%3B%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%3Cform%20onSubmit%3D%7Bthis._handleSubmit%7D%3E%0A%20%20%20%20%20%20%20%20%3Ch1%3EBreaking%20News%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%3Cp%3EThe%20peanut%20is%20neither%20a%20pea%20nor%20a%20nut.%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3Cstrong%3EDiscuss%3A%3C%2Fstrong%3E%0A%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%7Bcomments.map(%0A%20%20%20%20%20%20%20%20%20%20%20%20comment%20%3D%3E%20%3CComment%20comment%3D%7Bcomment%7D%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%3C%2Ful%3E%0A%20%20%20%20%20%20%20%20%3Cinput%0A%20%20%20%20%20%20%20%20%20%20placeholder%3D%22Weigh%20in%26hellip%3B%22%0A%20%20%20%20%20%20%20%20%20%20ref%3D%22newCommentInput%22%0A%20%20%20%20%20%20%20%20%20%20type%3D%22text%22%0A%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%3C%2Fform%3E%0A%20%20%20%20)%3B%0A%20%20%7D%0A%7D%0AStory%20%3D%20Relay.createContainer(Story%2C%20%7B%0A%20%20fragments%3A%20%7B%0A%20%20%20%20story%3A%20()%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20fragment%20on%20Story%20%7B%0A%20%20%20%20%20%20%20%20comments%20%7B%0A%20%20%20%20%20%20%20%20%20%20%24%7BComment.getFragment(&#x27;comment&#x27;)%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%24%7BCreateCommentMutation.getFragment(&#x27;story&#x27;)%7D%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%2C%0A%7D)%3B%0A%0Aclass%20StoryHomeRoute%20extends%20Relay.Route%20%7B%0A%20%20static%20routeName%20%3D%20&#x27;Home&#x27;%3B%0A%20%20static%20queries%20%3D%20%7B%0A%20%20%20%20story%3A%20(Component)%20%3D%3E%20Relay.QL%60%0A%20%20%20%20%20%20query%20StoryQuery%20%7B%0A%20%20%20%20%20%20%20%20story%20%7B%20%24%7BComponent.getFragment(&#x27;story&#x27;)%7D%20%7D%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%60%2C%0A%20%20%7D%3B%0A%7D%0A%0AReactDOM.render(%0A%20%20%3CRelay.RootContainer%0A%20%20%20%20Component%3D%7BStory%7D%0A%20%20%20%20route%3D%7Bnew%20StoryHomeRoute()%7D%0A%20%20%2F%3E%2C%0A%20%20mountNode%0A)%3B&amp;schema=import%20%7B%0A%20%20GraphQLID%2C%0A%20%20GraphQLList%2C%0A%20%20GraphQLNonNull%2C%0A%20%20GraphQLObjectType%2C%0A%20%20GraphQLSchema%2C%0A%20%20GraphQLString%2C%0A%7D%20from%20&#x27;graphql&#x27;%3B%0Aimport%20%7B%0A%20%20mutationWithClientMutationId%2C%0A%7D%20from%20&#x27;graphql-relay&#x27;%3B%0A%0Aconst%20STORY%20%3D%20%7B%0A%20%20comments%3A%20%5B%5D%2C%0A%20%20id%3A%20&#x27;42&#x27;%2C%0A%7D%3B%0A%0Avar%20CommentType%20%3D%20new%20GraphQLObjectType(%7B%0A%20%20name%3A%20&#x27;Comment&#x27;%2C%0A%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20id%3A%20%7Btype%3A%20GraphQLID%7D%2C%0A%20%20%20%20text%3A%20%7Btype%3A%20GraphQLString%7D%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A%0Avar%20StoryType%20%3D%20new%20GraphQLObjectType(%7B%0A%20%20name%3A%20&#x27;Story&#x27;%2C%0A%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20comments%3A%20%7B%20type%3A%20new%20GraphQLList(CommentType)%20%7D%2C%0A%20%20%20%20id%3A%20%7B%20type%3A%20GraphQLString%20%7D%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A%0Avar%20CreateCommentMutation%20%3D%20mutationWithClientMutationId(%7B%0A%20%20name%3A%20&#x27;CreateComment&#x27;%2C%0A%20%20inputFields%3A%20%7B%0A%20%20%20%20text%3A%20%7B%20type%3A%20new%20GraphQLNonNull(GraphQLString)%20%7D%2C%0A%20%20%7D%2C%0A%20%20outputFields%3A%20%7B%0A%20%20%20%20story%3A%20%7B%0A%20%20%20%20%20%20type%3A%20StoryType%2C%0A%20%20%20%20%20%20resolve%3A%20()%20%3D%3E%20STORY%2C%0A%20%20%20%20%7D%2C%0A%20%20%7D%2C%0A%20%20mutateAndGetPayload%3A%20(%7Btext%7D)%20%3D%3E%20%7B%0A%20%20%20%20var%20newComment%20%3D%20%7B%0A%20%20%20%20%20%20id%3A%20STORY.comments.length%2C%0A%20%20%20%20%20%20text%2C%0A%20%20%20%20%7D%3B%0A%20%20%20%20STORY.comments.push(newComment)%3B%0A%20%20%20%20return%20newComment%3B%0A%20%20%7D%2C%0A%7D)%3B%0A%0Aexport%20default%20new%20GraphQLSchema(%7B%0A%20%20query%3A%20new%20GraphQLObjectType(%7B%0A%20%20%20%20name%3A%20&#x27;Query&#x27;%2C%0A%20%20%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20%20%20story%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20StoryType%2C%0A%20%20%20%20%20%20%20%20resolve%3A%20()%20%3D%3E%20STORY%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%2C%0A%20%20%7D)%2C%0A%20%20mutation%3A%20new%20GraphQLObjectType(%7B%0A%20%20%20%20name%3A%20&#x27;Mutation&#x27;%2C%0A%20%20%20%20fields%3A%20()%20%3D%3E%20(%7B%0A%20%20%20%20%20%20createComment%3A%20CreateCommentMutation%2C%0A%20%20%20%20%7D)%2C%0A%20%20%7D)%2C%0A%7D)%3B%0A" width="100%"></iframe></div></section></section></section><footer><span>Copyright © 2017 Facebook Inc</span></footer></div><div id="fb-root"></div><script>
            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
              ga('create', 'UA-71174216-1', 'auto');
              ga('send', 'pageview');
          </script></body></html>